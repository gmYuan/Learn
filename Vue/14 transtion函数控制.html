<!DOCTYPE html>
<html lang="zh-Hans">

<head>
	<meta charset="UTF-8">
	<title> transtion函数钩子 </title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"></script>


	<style>
		/* reset部分 */
		h4 {
			padding: 0;
			margin: 0;
		}

		.gram {
			padding-bottom: 20px;
		}
	</style>

</head>

<body>
	<div id="app">

		<!-- 例1 transtion的appear+type+duration和animition -->
		<div>
			<h4> transtion函数钩子 </h4>


			<button v-on:click="show = !show">
				切换显示
			</button>

			<!-- S1 在transition组件标签上 监听动画钩子函数+对应回调方法 -->

			<transition 
				name="fade" 
				@before-enter="beforeEnter" 
				@enter="enter" 
				@leave="leave" 
				:css="false">
				<!-- S3 对仅使用 JS实现过渡的元素添加 :css="false"，Vue会跳过CSS的检测 + 这也可以避免过渡过程中 CSS 的影响 -->

					<p v-if="show">hello YC</p>
			</transition>

		</div>
		<hr>


	</div>


	<script src="https://cdn.bootcss.com/vue/2.6.5/vue.js"></script>

	<script>
		let app = new Vue({
			el: '#app',
			data: {
				show: true
			},
			methods: {
				// S2.1 刚显示动画的 第1帧效果
						// 回调方法接收默认参数el: 表示transition内部需要添加效果的元素 
				beforeEnter: function (el) {
					el.style.opacity = 0
					el.style.transformOrigin = 'left'
				},

				// S2.2 显示动画时的 效果
						// 只用 JS机进行过渡，要在 enter/leave中使用done进行回调。 否则，它们将被同步调用，过渡会立即完成
						// 	Velocity是一个动画效果的JS库
				enter: function (el, done) {
					Velocity(el, { opacity: 1, fontSize: '1.4em' }, { duration: 300 })
					Velocity(el, { fontSize: '1em' }, { complete: done })
				},

				leave: function (el, done) {
					Velocity(el, { translateX: '15px', rotateZ: '50deg' }, { duration: 600 })
					Velocity(el, { rotateZ: '100deg' }, { loop: 2 })
					Velocity(el, {
						rotateZ: '45deg',
						translateY: '30px',
						translateX: '30px',
						opacity: 0
					}, { complete: done })
				}

			},

		})
	</script>

</body>

</html>