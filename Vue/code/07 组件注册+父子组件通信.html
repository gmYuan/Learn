<!DOCTYPE html>
<html lang="zh-Hans">

<head>
	<meta charset="UTF-8">
	<title>组件注册+父子组件通信</title>

	<style>
		/* reset部分 */
		h4 {
			padding:0;
			margin: 0;
		}
		.gram {
			padding-bottom: 20px;
		}
		

	</style>

</head>

<body>
	<div id="app">

		<!-- 例1 -->
		<div>
			<h4> 全局注册 </h4>
			<div class="gram"> 语法: Vue.component </div>

			<my-component></my-component>
			<my-component></my-component>	

		</div>
		<hr>

		<!-- 例2 -->
		<div>
			<h4> 局部注册 </h4>
			<div class="gram"> 语法: 	components: {'子组件名': {配置参数对象}} </div>
	
			<inner-component></inner-component>
		</div>
		<hr>

		<!-- 例3 -->
		<div>
			<h4> 父组件向子组件传递数据 </h4>
			<div class="gram"> 语法: 子组件标签绑定自定义属性 + 子组件实例属性props </div>
		
			<father-child info="outmsg"> </father-child>
			<father-child :info="outmsg"> </father-child>
		</div>
		<hr>

		<!-- 例4 -->
		<div>
			<h4> props使用场景1: 获取传递值作为数据初始值— porps + 子组件内部data(){} </h4>
			<h4> props使用场景2: 传递值用作处理的原始值— porps + 子组件内部computed(){}</h4>
			
			<father-child2 :price="outmsg"></father-child2> <br>
			
			<input type="text" v-model='width'>
			<father-child3 :width='width'></father-child3>
					
		</div>
		<hr>

		<!-- 例5-->
		<div>
			<h4> 子组件向父组件传递数据 </h4>
			<div class="gram"> 语法: 子组件事件中传出this.$emit('自定义事件') + 父组件的子组件标签中监听自定义事件 </div>

			<div> 当前父组件的数据金额是:  {{price}} </div>
		
			<child-father :price="price" @changemoney="showprice"></child-father>
			
		</div>
		<hr>

	</div>

	
	<script src="https://cdn.bootcss.com/vue/2.6.5/vue.js"></script>

	<script>
		//例1组件
		Vue.component('my-component', {
    	data(){
    		return {
    			count: 0
    		}
    	},
    	template: `
    		<div>
    		我是全局注册的组件
				<button @click="count++">{{count}}</button>
				</div>
    	`
    })


		let app = new Vue({
			el: '#app',
			data: {
				//例3/4 父组件的数据
				outmsg: 10,

				//例4.2父组件数据
				width: 100,

				//例5 父组件数据
				price: 2000
			},

			components: {
				//例2组件
      	'inner-component': {
      		data(){
      			return {
      				msg: 'Hello world'
      			}
      		},
      		template: 
      			'<div>我是内部的局部组件--{{msg}}</div>'
      	},

				//例3组件
				'father-child': {
					props: ['info'],
					template: '<div>内部组件2收到父组件的信息了-- {{info}}--- {{typeof info}}</div>'
				},

				//例4.1组件
				'father-child2': {
					props: ['price'],
					data(){
						return {
							count: this.price
						}

					},
					template: '<div>子组件获取的数据是--: {{count}}</div>'
				},

				//例4.2组件
				'father-child3': {
					props: ['width'],
					template: '<div :style= "style">获取的宽度值是{{width}}</div>',
					computed: {
						style(){
							return {
								width: this.width + 'px',
								background: '#FFC2DB',
								border: '1px solid'
							}
						}
					}
				},

				// 例5组件
				'child-father': {
      		props:['price'],
      		data(){
      			return {
      				count: this.price
      			}
      		},
      		template: `
      			<div style="margin-top: 20px">
      			  <button @click="addprice">增加100金</button>
						  <button @click="minusprice">减少100金</button>
						</div>
      		`,
      		methods: {
      			addprice(){
      				this.count = this.count + 100
      				this.$emit('changemoney', this.count)
      			},
      			minusprice(){
      				this.count = this.count - 100
      				this.$emit('changemoney', this.count)
      			}
      		}
      	}

			},

			//例5父组件方法
			methods: {
      	showprice(value){
      		this.price = value
      	}


      }

		})
	</script>

</body>

</html>

