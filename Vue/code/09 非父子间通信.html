<!DOCTYPE html>
<html lang="zh-Hans">

<head>
	<meta charset="UTF-8">
	<title>非父子间通信</title>

	<style>
		/* reset部分 */
		h4 {
			padding:0;
			margin: 0;
		}
		.gram {
			padding-bottom: 20px;
		}
		

	</style>

</head>

<body>
	<div id="app">

		<!-- 例1 -->
		<div>
			<h4> a组件修改b组件的数据值 </h4>
			<div class="gram"> 语法: bus原型对象 + mounted监听 </div>

			<a-component></a-component>
			<b-component></b-component>

		</div>
		<hr>

		

	</div>

	
	<script src="https://cdn.bootcss.com/vue/2.6.5/vue.js"></script>

	<script>

		Vue.prototype.bus = new Vue()  //S1 Vue原型上创建一个实例，从而所有组件都可以使用 所有vue实例方法
		
		let app = new Vue({
			el: '#app',


			components: {
				'a-component': {
      		data(){
      			return {
      				total: 4120,
      			}
      		},
      		template: ` <div>我是a组件里的值-- {{total}}</div>`,

      		methods: {
      			bechanged(value){
      				this.total = value
      			}
      		},
      		mounted(){
      			this.bus.$on('b-change-a', this.bechanged)
      		},
      	},
      	

				'b-component': {
      		data(){
      			return {
      				total2: 4220,
      				msg: '我是b子组件的数据'
      			}
      		},
      		template: `<button @click="change">我是b组件按钮，我的值是{{total2}}---点击我可以让a组件的值变成和我一样</button>`,

      		methods: {
      			change(){
      				this.bus.$emit('b-change-a', this.total2)
      			}
      		},
      		
			}
		
		}

			
	})
	</script>

</body>

</html>

