<!DOCTYPE html>
<html lang="zh-Hans">
<head>
	<meta charset="UTF-8">
  <title>Vue计算属性</title>
</head>

<body>
	<div id="app">
    <p> 
      功能1: 翻转显示信息</br>
        {{msg}} </br>
        {{msg.split(',').reverse().join(',')}} </br>
        {{reverseMsg}}</br>
    </p> 
    
    <p>
      功能2.1: A实例里的计算属性， 可以依赖多个数据值</br>
      {{prices}}</br>
    </p>

    <p>
      功能2.2:A实例里的计算属性 还可以依赖 B实例的数据</br>
      {{otherapp}}</br>
    </p>


    <p>
      关于get 和 setter的示例</br>

      <input type="text" v-model="fullName"></input>  </br>
      姓名: {{newName}}</br>
    </p>
    
    
    <p>
      计算属性和方法的区别</br>

      计算属性: {{codate}} //只有依赖的数据发生变化时，才会调用     </br>
      方法设置: {{medate()}}  //当页面数据变化触发渲染时，就会调用
    </p>

   

	</div>


	<script src="https://cdn.bootcss.com/vue/2.6.5/vue.js"></script>
	<script>
     var app2 = new Vue({
      el: '#app2',
      data: {
        msg: 'hi'
      }
    })

		let app = new Vue({
      el: '#app',
      data: {
        firstName: 'yc',
        lastName: 'star',
        fullName: 'yc star',
        
        msg: '123,456,789',
        cart: [
          {name: '商品1', price: '10', number: 4},
          {name: '商品2', price: '20', number: 3},
          {name: '商品3', price: '30', number: 1},
          {name: '商品4', price: '50', number: 1}
        ],
        cart2: [
           {name: '商品5', price: '20', number: 1},
           {name: '商品6', price: '30', number: 2},
        ]
      },


      computed:{
        reverseMsg(){
          return this.msg.split(',').reverse().join(',')
        },
        prices(){
          let total = 0
          for (let i=0; i<this.cart.length; i++) {
            total = total + (this.cart[i].price * this.cart[i].number)   
          }
          for (let i=0; i<this.cart2.length; i++) {
            total = total + (this.cart2[i].price * this.cart2[i].number)   
          }
          return total
        },
        otherapp(){
          return app2.msg + '' + 'ycstar'
        },
        newName: {
          //getter
          get(){
            return this.firstName + ' ' + this.lastName
          },
          set(name){
            let allname = name.split(' ')
            this.firstName = allname[0]
            this.lastName = allname[1]
            this.fullName = this.firstName + ' ' + this.lastName
          }
        },
        codate(){
          return Date.now()
        }

      },

      methods: {
        medate(){
          return Date.now()
        }
      }
		})

   
	</script>

	
</body>
</html>