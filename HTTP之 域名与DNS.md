# HTTP之 域名与DNS

Q1 什么是域名，为什么要有域名
A:
S1 网络层对数据链路层通过IP进行了抽象，由点到点 抽象到 端到端/主机对主机的 传输
S2 但是纯数字的 IP地址不利于人的记忆和使用，所以为了便于人的理解，才出现了域名系统
S3 域名系统 通过 `主机名.二级域名.顶级域名`的方式， 实现了对 IP地址和域名的 多对一映射
S4 所以 域名本质上是一个 `命名空间系统`，通过它来实现 对IP地址的标识

S5 关键词：抽象/ IP映射/ 命名空间系统/ 别名

----
Q2 什么是DNS，DNS和域名有什么关系
A:
S1 因为 域名系统是对IP的映射，那么这个映射关系，就是通过DNS进行解析的
S2 所以，DNS的作用，就是用来解析 `IP地址 <--> 域名`

-----
Q3 DNS如何 高效的解析域名
A:
S1 方法1 分而治之：DNS在结构上，按树状结构依次分为了 
  - 根域名服务器：管理顶级域名，返回 "com"/ "cn"等 顶级域名服务器的IP地址
  - 顶级域名服务器：管理各自域名下的 权威域名服务器，比如 com顶级域名服务器可以返回 apple.com域名服务器的 IP地址
  - 权威域名服务器：管理自己域名下 主机的IP地址，比如 apple.com权威域名服务器可以返回 www.apple.com 的 IP地址

即 访问根域名服务器：[获取到com的IP地址]  --> 访问com顶级域名服务器：[获取到apple.com的IP地址] -->  访问apple.com权威域名服务器：[获取到主机www.apple.com的IP地址]
                    
S2 缓存机制：同样分为多级缓存，包括：
  - 浏览器缓存 --> 操作系统缓存 --> 本地hosts文件缓存 --> 非权威域名服务器 的缓存 --> 权威域名服务器 的缓存
  - 非权威域名服务器，是由 大公司/网络运行商自己 建立的DNS服务器，它可以作为 权威域名服务器的 代理，减轻 权威域名服务器的 访问压力，比较知名的 DNS有Google的 "8.8.8.8" / CloudFlare的 "1.1.1.1"等

-----
Q4 域名这层映射IP的抽象，有哪些作用/好处
A:
S1 便于用户使用
S2 重定向：保持域名对外稳定，而其映射的 主机IP地址可以更改
S3 建立内部域名系统：如 img.inner.app/goods.inner.app，这样发起网络通信就不用写死IP地址了，可以直接用域名

S4 实现基于域名的负载均衡：
  - 因为域名解析可以返回多个IP地址，所以一个域名可以对应 多台主机，客户端收到多个IP地址后，就可以自己使用 轮询算法依次向服务器发起请求，实现负载均衡

  - 域名解析可以配置内部的策略，返回离客户端最近/当前服务质量最好 的主机，这样在DNS端 把请求分发到不同的服务器，实现负载均衡
