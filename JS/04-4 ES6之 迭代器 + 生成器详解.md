# ES6之 迭代器 + 生成器 详解

目录:

1 [预读文档](#1)

2 [迭代器](#2) 

3 [生成器](#3)



## <span id="1"> 1 预读文档 </span>

1 [深入理解ES6](https://legacy.gitbook.com/book/oshotokill/understandinges6-simplified-chinese/details)

2 [Iterator 和 for...of 循环](http://es6.ruanyifeng.com/#docs/iterator)

3 [对象的扩展](http://es6.ruanyifeng.com/#docs/object)

4 [变量的解构赋值](http://es6.ruanyifeng.com/#docs/destructuring)

阅读原因: 全面介绍了迭代器



## <span id="2"> 2 迭代器 </span>

1 Q: 迭代和循环的区别是什么

A: S1 循环: 明确的起止范围

S2 迭代: 不明确结束范围


2 Q: 模拟一个迭代器实现

A: 函数 -> 对象: next方法 -> 返回结果对象

```js
function creatorIterator(arr) {
  let i = 0   // 必须

  return {
    next() {
      let done = (i >= arr.length)
      let value = (done ? undefined : arr[i++] )

      return {
        done,
        value
      }
    }
  }
}

let iterator = creatorIterator([1, 2, 3])
console.log(iterator.next())     // "{ value: 1, done: false }"
console.log(iterator.next())     // "{ value: 2, done: false }"
console.log(iterator.next())     // "{ value: 3, done: false }"
console.log(iterator.next())     // "{ value: undefined, done: true }"

// 之后的所有调用
console.log(iterator.next()); // "{ value: undefined, done: true }"
```








## <span id="3"> 3 剩余参数rest </span>

1 Q: 剩余参数rest有哪些使用场景

A: S1 剩余参数: 可以把多个独立的参数 合并到一个数组中

所以可用于 函数传参，替代arguments对象

```js
// 例1: 使用示例
function add(...values) {
  let sum = 0
  values.reduce( (pre, cur) => {return sum = pre + cur})
  return sum
}

add(1, 2, 3) // 6
```

S2 剩余参数 + 解构赋值

```js

// 例2: 数组解构赋值
let colors = [ "red", "green", "blue" ]
let [ firstColor, ...restColors ] = colors

console.log(firstColor)             // "red"
console.log(restColors.length)     // 2
console.log(restColors[0])         // "green"
console.log(restColors[1])        // "blue"
```



## <span id="4"> 4 扩展运算符... </span>

1 Q: 扩展运算符... 有哪些使用场景

A: S1 用于函数传参，把一个数组分解成各个单独参数
```js

// 例1: 替代 apply方法调用函数
Math.max.apply(null, [14, 3, 77])  // ES5 的写法
Math.max(...[14, 3, 77])  // ES6 的写法, 等同于 Math.max(14, 3, 77)
```


S2 用于数组/对象
```js

// 例2: 浅拷贝数组
const a1 = [1, 2]

const a2 = [...a1]    // 方法1: 扩展运算符方法
const [...a2] = a1    // 方法2: 解构赋值 + 剩余参数法



// 例3: 合并数组
const arr1 = ['a', 'b'];
const arr2 = ['c'];
[...arr1, ...arr2]    // [ 'a', 'b', 'c' ]

```



## <span id="5"> 5 解构赋值 </span>

1 Q: 解构赋值 有哪些使用场景

A: S1 对象解构赋值 + 默认参数

```js
let node = {
  type: "Identifier"
}

let { type: localType, name: localName = "bar" } = node

console.log(localType)    // "Identifier"
console.log(localName)    // "bar"
```


S2 数组解构赋值
```js
// 例1: 获取特定index值
let colors = [ "red", "green", "blue" ]
let [ , , thirdColor ] = colors
console.log(thirdColor)            // "blue"


// 例2: 解构赋值 + 默认参数
let colors = [ "red" ]
let [ firstColor, secondColor = "green" ] = colors
console.log(firstColor)      // "red"
console.log(secondColor)    // "green"
```


S3 函数参数解构赋值 + 默认参数: 用以明确 对象参数的具体内容
```js
function setCookie(name, value, { secure, path, domain, expires } = {}) {
  // ...
}

// 例2
function setCookie(name, value, { secure = false, path = "/", domain = "example.com"} = {}) {
  // ...
}
```

