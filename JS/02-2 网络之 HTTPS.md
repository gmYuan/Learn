# 网络之 HTTPS

## 目录

1 [预读文档](#1)

2 [HTTPS的作用](#2)

3 [HTTPS的 建立过程](#3)


## <span id="1">一 预读文档 </span>

1 [HTTPS原理](https://www.bilibili.com/video/av66187268?from=search&seid=7365684685611931926)

阅读原因: 入门讲解视频


1 [深入理解HTTPS工作原理](https://juejin.im/post/5ca6a109e51d4544e27e3048#heading-1)

阅读原因: 第2部分 直接参考文档 + HTTPS的原理介绍


2 [看图学HTTPS](https://juejin.im/post/5b0274ac6fb9a07aaa118f49#heading-10)

阅读原因: 第3部分 直接参考文档 + HTTPS的原理介绍


## <span id="2">二 HTTPS的作用 </span>

1 Q: 为什么要引入HTTPS

A: 由于HTTP有以下 安全问题，所以引入HTTPS解决这些问题:

S1 HTTP采用明文通信, 数据容易被窃听;

S2 HTTP不会检测数据传输的完整性, 所以数据容易被 篡改;

S3 HTTP没有任何身份验证, 所以有可能被 中间人身份伪造;


HTTPS在 TCP 和 HTTP层之间, 新增了 SSL/TLS安全层, 用来保证HTTP通话过程中的 信息安全和身份认证。


2 Q: HTTPS 和 HTTP的区别

A:

S1 默认连接的 端口不同: HTTP的默认连接端口是80, HTTPS的默认连接端口是443;

S2 需要的证书不同: HTTPS需要用到SSL证书，而HTTP不用;

S3 安全性不同: HTTP采用明文传输, 而HTTPS 采用SSL加密传输;

S4 HTTPS 对搜索引擎更友好


## <span id="3"> 三 HTTPS的 建立过程 </span>

1 Q: HTTPS的原理是什么

A: 实现原理是: 对称加密(如AES) + 非对称加密(如RSA) + 散列算法(如SHA) + CA第3方认证

具体含义, 可参考 预读文档1 和 预读文档2


2 Q: HTTPS的建立过程是什么

A:

S1 客户端A 请求建立SSL连接，并向服务端B 发送一个随机数1 和 客户端支持的 非对称加密方法;

S2 服务端B 选择客户端支持的一种加密算法 => 生成另一个随机数2 + 将 数字证书(其中包含 服务器公钥P1) 发给客户端A;

S3 A进行证书验证，验证通过=> 生成一个新的随机数3 + 通过P1公钥及加密方法进行加密，发送给B;

S4 B 用 私钥 P'1 进行解密, 获取到随机数3 => 利用随机数1,2,3生成 对称加密key- session key;

`以上也是 SSL层的 4次握手过程`


再补充说明一下 数字证书验证的具体细节(数字证书用来解决 身份验证和 数据完整性验证)

S1 数字证书包括: 网站明文信息 + 服务器公钥P1 + `数字签名(明文信息+散列算法(如Hash)——> 消息摘要D + CA的私钥P2'——> 数字签名)`

S2.1 客户端获取到数字证书后, 会使用内置在 操作系统中的 CA公钥P2 解密数字签名, 从而获取到 消息摘要D;

S2.2 客户端利用 网站明文信息 + 散列算法——> 生成消息摘要D2;

S2.3 比较 D 和 D2的值, 如果一致则 验证通过;


S3 `数字签名的作用，验证了传输来的 服务器端公钥P1的 真实性`, 数字签名验证机制 解决了 中间人身份伪造的问题