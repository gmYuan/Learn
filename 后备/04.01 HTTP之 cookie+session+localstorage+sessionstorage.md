# cookie/session/localstorage/sessionstorage

## 一 目录

目录

1 [预读文档](#1)

2 [知识详解](#2)

  - [2.1 Cookie 和 Session 的区别](#2.1)

  - [2.2 Cookie 和 LocalStorage 的区别](#2.2)

  - [2.3 Cookie的过期和删除](#2.3)


## <span id="1">一  预读文档</span>

1 阅读文档有:

01 [方方教程— cookie等相关](https://xiedaimala.com/tasks/492db2e7-b503-413b-bc3f-6ca6786fc62d)

阅读原因: 相关知识点视频介绍，清晰易懂且有部分文本记录




## <span id="2">二  知识详解</span>

### <span id="2.1"> 2.1 Cookie 和 Session 的区别 </span>

1 Q: Cookie 和 Session 有什么区别

A: 一般情况下，Session是基于Cookie实现的

S1.1 服务器可以设置 Set-Cookie响应头

S1.2 之后客户端在访问同源下的网站时，都会自动带上设置的cookie

S1.3 Cookie 默认在用户关闭页面后就失效，不过 后台代码可以任意设置 Cookie 的过期时间

S1.4 Cookie的大小大概在 4kb 以内


S2.1 服务器通过Set-Cookie响应头，发送一个随机数生成的 SessionID

S2.2 这个SessionID是一个对象，内部关联保存着相关用户的 隐私信息

S2.3 在服务器内存里，保存着一个session哈希对象，内部保存着所有用户分配的 sessionID

S2.4 所以，Session可以理解为 Cookie+SessionID（随机数），是内存中的一个对象(哈希表)


### <span id="2.2"> 2.2 Cookie 和 LocalStorage 的区别 </span>

1 Q: Cookie 和 LocalStorage 有什么区别

A: Cookie和HTTP有关，而 LocalStorage和HTTP无关

S1 LocalStorage的信息是存在本地硬盘上的, HTTP 不会带上 LocalStorage 的值

S2 只有相同域名的页面才能互相读取 LocalStorage（没有同源那么严格）

S3 每个域名 localStorage 最大存储量为 5Mb 左右

S4 LocalStorage 永久有效，除非用户清理缓存

S5 LocalStorage常用场景：记录有没有提示过用户（没有用的信息，不能记录敏感信息如 密码）


### <span id="2.3"> 2.3 Cookie的过期和删除 </span>

1 Q: Cookie 如何设置过期时间 + 如何删除 Cookie

A: S1 设置过期时间: 

```js
......

response.setHeader("Set-Cookie", `Expires=${new Date(Date.now() + 1000 * 10).toGMTString()}`)
            
```

S2 删除Cookie

```js
.......

response.clearCookie('cookiename')

```




